{% extends "base.html" %}
{% block head %}
{% endblock head %}
{% block body %}
{% block content %}
<header>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">Other</h1>
            <p class="lead">Other actions.</p>
        </div>
    </div>
</header>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<hr class="my-4">
<div class="container">
    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-header">
                    Backup&nbsp;&nbsp;<i class="fa fa-download"></i>
                </div>
                <div class="card-body">
                    Download a backup of the REDCap project metadata, item, fields, and records.
                    <br>
                    <a href="{{ url_for('download_backup') }}">
                        <button name="backupButton" class="btn btn-secondary"><i
                                class="fa fa-download"></i>&nbsp;&nbsp;Download
                            backup</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card">
                <div class="card-header">
                    Help&nbsp;&nbsp;<i class="fa fa-question"></i>
                </div>
                <div class="card-body">
                    If you have run into an error, need help, or want to provide feed-back, please open a GitHub issue
                    following
                    the
                    link below:
                    <br>
                    <a href="https://github.com/NeuroDevComp/babylab-redcap/issues/new/choose" target="_blank">
                        <button name="Issue" class="btn btn-secondary"><i
                                class="fa-brands fa-github"></i>&nbsp;&nbsp;Report
                            an
                            issue</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card">
                <div class="card-header">
                    REDCap&nbsp;&nbsp;<i class="fa fa-database"></i>
                </div>
                <div class="card-body">
                    Link to REDCap database
                    <br>
                    <a href="https://apps.sjdhospitalbarcelona.org/redcap/" target="_blank">
                        <button name="Issue" class="btn btn-secondary"><i class="fa fa-database"></i>&nbsp;&nbsp;Go to
                            the
                            database</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col">
            <div class="card text-center">
                <div class="card-header">
                    Age calculator&nbsp;&nbsp;<i class="fa fa-calculator"></i>
                </div>
                <div class="card-body">
                    <div class="input-group date">
                        <span class="input-group-text" id="date1-label">Date 1</span>
                        <input type="datetime-local" id="date1" name="date1" />
                    </div>
                    <br>
                    <div class="input-group date">
                        <span class="input-group-text" id="date2-label">Date 2</span>
                        <input type="datetime-local" id="date2" name="date2" />
                    </div>
                    <button type="button" class="btn btn-dark" onclick="calculate()">Calculate</button>
                </div>
                <div class="card-footer" id="result-footer">
                    <span id="result"></span>
                </div>
            </div>
        </div>
        <div class="col">
        </div>
        <div class="col">
        </div>
    </div>
    <script src="static/js/age_calculator.js"></script>
    <script type="text/javascript">
        let today = new Date()
        today.setSeconds(0, 0);
        document.getElementById("date1").valueAsDate = today;
        document.getElementById("date2").valueAsDate = today;
        document.getElementById("result-footer").style.display = "none"
        function calculate() {
            result = get_age(
                document.getElementById("date1").value,
                document.getElementById("date2").value
            )
            document.getElementById("result-footer").style.display = "block"
            document.getElementById("result").textContent = result
        }
    </script>
</div>
{% endblock content %}
{% endblock body %}